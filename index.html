<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulado OAB 44 - Painel Completo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .correct { border: 2px solid #10b981 !important; background-color: #ecfdf5 !important; }
        .wrong { border: 2px solid #ef4444 !important; background-color: #fef2f2 !important; }
        .sidebar-correct { background-color: #10b981 !important; color: white !important; }
        .sidebar-wrong { background-color: #ef4444 !important; color: white !important; }
        .sidebar-active { border: 2px solid #3b82f6 !important; }
        .hidden { display: none !important; }
        .option-btn:disabled { opacity: 1; cursor: default; }
    </style>
</head>
<body class="bg-slate-100 font-sans text-gray-900">

    <div id="home-screen" class="max-w-2xl mx-auto mt-20 p-6">
        <div class="text-center mb-10">
            <h1 class="text-4xl font-black text-slate-800 mb-2 italic">Simulado OAB Pro</h1>
            <p class="text-slate-500 font-medium">Sistema completo com análise de desempenho</p>
        </div>
        <div class="grid grid-cols-1 gap-6">
            <button onclick="startQuiz('OAB44')" class="group p-8 bg-white border-2 border-blue-500 rounded-2xl shadow-xl hover:scale-105 transition-all text-left">
                <span class="text-blue-600 font-bold text-xs uppercase tracking-widest">Exame 44 Oficial</span>
                <h2 class="text-2xl font-bold text-slate-800 mt-1">Simulado com Mapa de Questões</h2>
                <p class="text-slate-500 text-sm mt-2 font-medium">80 questões com acompanhamento lateral e relatório final por matéria.</p>
                <div class="mt-4 text-blue-600 font-bold italic underline">CLIQUE PARA INICIAR →</div>
            </button>
        </div>
    </div>

    <div id="quiz-screen" class="max-w-[1400px] mx-auto p-4 flex gap-6 hidden">
        
        <aside class="w-72 bg-white rounded-2xl shadow-md p-4 sticky top-4 h-[calc(100vh-2rem)] overflow-y-auto hidden md:block border border-slate-200">
            <h3 class="text-xs font-black text-slate-400 uppercase tracking-widest mb-4">Mapa de Questões</h3>
            <div id="questions-grid" class="grid grid-cols-5 gap-2 text-center text-xs font-bold">
                </div>
            <div class="mt-6 pt-6 border-t border-slate-100">
                <div class="flex items-center gap-2 mb-2 text-[10px] uppercase font-bold text-slate-500">
                    <div class="w-3 h-3 bg-green-500 rounded"></div> Acerto
                </div>
                <div class="flex items-center gap-2 text-[10px] uppercase font-bold text-slate-500">
                    <div class="w-3 h-3 bg-red-500 rounded"></div> Erro
                </div>
            </div>
        </aside>

        <div class="flex-1">
            <header class="flex justify-between items-center bg-white p-4 rounded-xl shadow-md mb-6 sticky top-2 z-10 border border-slate-200">
                <div class="flex flex-col">
                    <button onclick="location.reload()" class="text-xs font-bold text-blue-600 mb-1 hover:underline">← SAIR</button>
                    <div id="total-timer" class="text-2xl font-mono font-bold text-slate-700">05:00:00</div>
                </div>
                <div class="text-right">
                    <span class="text-[10px] text-slate-400 font-black uppercase">Tempo Questão</span>
                    <div id="question-timer" class="text-xl font-mono font-medium text-blue-500">00:00</div>
                </div>
            </header>

            <main id="main-quiz-area" class="bg-white p-6 md:p-10 rounded-2xl shadow-xl border border-slate-100">
                <div class="flex justify-between items-center mb-6">
                    <div class="flex gap-2">
                        <span id="subject-tag" class="bg-blue-600 text-white text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-widest"></span>
                        <span id="topic-tag" class="text-[10px] text-slate-400 font-bold uppercase py-1 italic"></span>
                    </div>
                    <div class="text-[10px] font-black text-slate-300">Q. <span id="current-idx-display">1</span>/80</div>
                </div>
                
                <h2 id="question-text" class="text-lg font-medium leading-relaxed text-slate-800 mb-8 text-justify"></h2>
                <div id="options-container" class="space-y-4"></div>

                <div id="feedback" class="mt-8 p-6 bg-blue-50 rounded-xl border-l-8 border-blue-600 hidden">
                    <h4 class="font-black text-blue-800 mb-2 uppercase text-xs tracking-widest italic">⚖️ Fundamentação:</h4>
                    <p id="justification-text" class="text-slate-700 text-sm leading-relaxed font-medium italic"></p>
                </div>

                <footer class="mt-10 pt-6 border-t border-slate-100 flex justify-between items-center">
                    <button onclick="prevQuestion()" class="text-slate-400 hover:text-slate-800 font-bold px-4 py-2 transition">ANTERIOR</button>
                    <button onclick="nextQuestion()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold px-8 py-3 rounded-xl transition shadow-lg shadow-blue-200">PRÓXIMA QUESTÃO</button>
                </footer>
            </main>

            <div id="result-screen" class="hidden bg-white p-8 rounded-2xl shadow-2xl">
                <h2 class="text-3xl font-black text-slate-800 mb-6 text-center italic">Desempenho Final</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-slate-50 p-6 rounded-xl text-center">
                        <span class="text-xs font-black uppercase text-slate-400">Total de Acertos</span>
                        <div class="text-6xl font-black text-blue-600 my-2"><span id="score-total">0</span>/80</div>
                        <div id="score-percent" class="text-sm font-bold text-slate-500 italic">0% de aproveitamento</div>
                    </div>
                    <div>
                        <h3 class="font-black text-slate-800 uppercase text-xs mb-4 tracking-widest">Análise por Matéria</h3>
                        <div id="subject-report" class="space-y-3">
                            </div>
                    </div>
                </div>
                <div class="mt-8 pt-6 border-t border-slate-100 text-center">
                    <button onclick="location.reload()" class="px-10 py-3 bg-slate-800 text-white font-bold rounded-xl hover:bg-slate-700 transition">Reiniciar Estudos</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const allExams = {
            "OAB44": [
                { subject: "Ética Profissional", topic: "Sociedade", text: "1. Gomes, advogado, decide constituir uma sociedade unipessoal. Após registro, é convidado a integrar uma sociedade pluripessoal na mesma base territorial. Segundo o EAOAB:", options: ["Pode integrar ambas livremente.", "Não pode integrar mais de uma sociedade de advogados na mesma base territorial.", "Pode integrar se houver autorização da Seccional.", "Pode, pois uma delas é unipessoal."], correct: 1, explanation: "Art. 15, § 4º do EAOAB: O advogado não pode pertencer a mais de uma sociedade na mesma base territorial." },
                { subject: "Ética Profissional", topic: "Mandato", text: "2. O advogado Dênis decidiu renunciar ao mandato em uma ação trabalhista por desentendimento com o cliente. Sobre os deveres de Dênis:", options: ["A renúncia dispensa comunicação se feita ao juiz.", "Dênis deve notificar o cliente e representá-lo pelos 10 dias seguintes à notificação.", "O dever de representar cessa no ato da postagem da carta.", "É proibido renunciar após a fase de instrução."], correct: 1, explanation: "Art. 112 do CPC e Art. 5º do Estatuto da OAB." },
                { subject: "Ética Profissional", topic: "Publicidade", text: "3. Uma sociedade de advogados decide impulsionar posts informativos em redes sociais sobre teses jurídicas. Segundo o Provimento 205/2021 do CFOAB:", options: ["Qualquer impulsionamento é vedado.", "É permitido o impulsionamento desde que não configure mercantilização ou captação indevida.", "Pode-se usar fotos dos veículos e bens dos sócios.", "É permitido citar nomes de clientes para dar autoridade."], correct: 1, explanation: "O Provimento 205/2021 permite marketing jurídico informativo, vedando a mercantilização." },
                { subject: "Ética Profissional", topic: "Incompatibilidade", text: "4. Pedro, advogado, foi eleito Vereador e assumiu a Presidência da Câmara Municipal. Segundo o Estatuto da OAB:", options: ["Pedro está apenas impedido contra a Fazenda Pública.", "Pedro está incompatibilizado de exercer a advocacia totalmente enquanto no cargo.", "Pedro pode advogar normalmente no escritório.", "Ele deve cancelar a OAB e fazer novo exame depois."], correct: 1, explanation: "Art. 28, VI do EAOAB estabelece incompatibilidade para membros de órgãos de direção do Poder Legislativo." },
                { subject: "Ética Profissional", topic: "Honorários", text: "5. Sobre o recebimento de honorários em caso de substabelecimento sem reserva de poderes:", options: ["O advogado anterior perde o direito aos honorários.", "O advogado substabelecente tem direito a receber honorários proporcionais ao trabalho.", "Os honorários são divididos igualmente entre todos.", "A OAB arbitra o valor em 20%."], correct: 1, explanation: "O advogado que sai da causa tem direito ao recebimento proporcional ao serviço já prestado." },
                { subject: "Ética Profissional", topic: "Gestante", text: "6. A advogada Maria, gestante, comparece à audiência e encontra fila. Ela possui direito a:", options: ["Preferência na ordem das audiências do dia.", "Isenção de custas processuais.", "Adiamento automático por 30 dias.", "Acesso apenas se for acompanhada."], correct: 0, explanation: "Art. 7-A, I, 'a' do EAOAB garante preferência para gestantes." },
                { subject: "Ética Profissional", topic: "Sigilo", text: "7. O advogado é intimado a depor como testemunha sobre fato confidencial de cliente. Ele deve:", options: ["Depor, se houver interesse da justiça.", "Recusar-se a depor, protegendo o sigilo que é direito e dever.", "Depor se o cliente autorizar oralmente.", "Apenas depor se for em segredo de justiça."], correct: 1, explanation: "O sigilo profissional é inviolável e o advogado tem o dever de se recusar a depor." },
                { subject: "Ética Profissional", topic: "Incompatibilidade", text: "8. Manter conduta incompatível com a advocacia, como incontinência pública escandalosa, gera:", options: ["Censura.", "Suspensão.", "Exclusão.", "Multa apenas."], correct: 1, explanation: "Art. 37, I do EAOAB prevê suspensão para condutas incompatíveis." },
                { subject: "Direito Constitucional", topic: "ADI", text: "9. Sobre a legitimidade do Governador para propor Ação Direta de Inconstitucionalidade (ADI):", options: ["É legitimado universal.", "É legitimado especial, devendo provar pertinência temática.", "Só pode propor ADI contra leis federais.", "Precisa de autorização da Assembleia."], correct: 1, explanation: "Art. 103, V da CF e jurisprudência do STF." },
                { subject: "Direito Constitucional", topic: "Remédios", text: "10. Para assegurar o conhecimento de informações relativas à pessoa do impetrante em bancos governamentais, cabe:", options: ["Mandado de Segurança.", "Habeas Data.", "Habeas Corpus.", "Mandado de Injunção."], correct: 1, explanation: "Art. 5º, LXXII, 'a' da CF." },
                { subject: "Direito Constitucional", topic: "Poder Executivo", text: "11. Lei que cria cargos na administração pública federal é de iniciativa privativa do:", options: ["Presidente da República.", "Congresso Nacional.", "STF.", "Ministro da Justiça."], correct: 0, explanation: "Art. 61, § 1º da CF." },
                { subject: "Direito Constitucional", topic: "Estado Sítio", text: "12. A comoção grave de repercussão nacional autoriza a decretação de:", options: ["Estado de Defesa.", "Estado de Sítio.", "Intervenção Municipal.", "Garantia da Lei e Ordem."], correct: 1, explanation: "Art. 137, I da CF." },
                { subject: "Direito Constitucional", topic: "CPI", text: "13. As CPIs podem, por autoridade própria:", options: ["Quebrar sigilo bancário.", "Determinar prisão preventiva.", "Anular atos do Executivo.", "Impedir saída do país."], correct: 0, explanation: "CPIs têm poderes de instrução judicial (quebra de sigilo bancário e fiscal)." },
                { subject: "Direito Constitucional", topic: "Controle Externo", text: "14. A Câmara Municipal exerce controle externo com auxílio do:", options: ["TCU.", "Tribunal de Contas do Estado ou Município.", "MP Federal.", "Senado."], correct: 1, explanation: "Art. 31, § 1º da CF." },
                { subject: "Direito Constitucional", topic: "Sanção", text: "15. O silêncio do Presidente da República por 15 dias úteis sobre projeto aprovado importa em:", options: ["Veto tácito.", "Sanção tácita.", "Caducidade.", "Arquivamento."], correct: 1, explanation: "Art. 66, § 3º da CF." },
                { subject: "Direito Administrativo", topic: "Serviço Público", text: "16. Suspensão de serviço público de transporte sem autorização fere o princípio da:", options: ["Legalidade.", "Continuidade.", "Impessoalidade.", "Modicidade."], correct: 1, explanation: "O serviço adequado deve satisfazer a continuidade." },
                { subject: "Direito Administrativo", topic: "Atos", text: "17. Remoção de servidor como forma de punição por crítica configura:", options: ["Poder disciplinar.", "Desvio de finalidade.", "Motivação nula.", "Ato vinculado."], correct: 1, explanation: "O desvio de finalidade ocorre quando o ato visa fim diverso do interesse público." },
                { subject: "Direito Administrativo", topic: "Intervenção", text: "18. Uso de terreno vizinho para apoiar obra pública por 6 meses é:", options: ["Servidão.", "Ocupação Temporária.", "Requisição.", "Limitação."], correct: 1, explanation: "Art. 36 do DL 3365/41." },
                { subject: "Direito Administrativo", topic: "Licitação", text: "19. Pela Lei 14.133/21, o contratado é obrigado a aceitar acréscimos de até:", options: ["10%.", "25%.", "50%.", "100%."], correct: 1, explanation: "Art. 124 da Lei 14.133." },
                { subject: "Direito Administrativo", topic: "Empresas", text: "20. A criação de subsidiárias de empresas públicas:", options: ["É livre.", "Depende de autorização legislativa.", "Depende de plebiscito.", "É proibida."], correct: 1, explanation: "Art. 37, XX da CF." },
                { subject: "Direito Administrativo", topic: "Responsabilidade", text: "21. Responsabilidade do Estado por atos omissivos, via de regra, é:", options: ["Objetiva.", "Subjetiva.", "Integral.", "Inexistente."], correct: 1, explanation: "Teoria da Culpa do Serviço." },
                { subject: "Direito Civil", topic: "Desconsideração", text: "22. Desvio de finalidade na pessoa jurídica exige:", options: ["Insolvência.", "Propósito de lesar credores ou atos ilícitos.", "Falência.", "Confusão patrimonial."], correct: 1, explanation: "Art. 50 do Código Civil." },
                { subject: "Direito Civil", topic: "Bens", text: "23. O direito à sucessão aberta é considerado:", options: ["Bem móvel.", "Bem imóvel por lei.", "Bem infungível.", "Patrimônio moral."], correct: 1, explanation: "Art. 80, II do CC." },
                { subject: "Direito Civil", topic: "Defeitos", text: "24. Estado de perigo exige que o dano seja:", options: ["Desconhecido pela outra parte.", "Conhecido pela outra parte.", "Apenas financeiro.", "Futuro e incerto."], correct: 1, explanation: "Art. 156 do CC." },
                { subject: "Direito Civil", topic: "Prescrição", text: "25. Prazos prescricionais podem ser alterados pelas partes?", options: ["Sim.", "Não, são fixados em lei.", "Apenas para reduzir.", "Apenas em contratos de consumo."], correct: 1, explanation: "Art. 192 do CC." },
                { subject: "Direito Civil", topic: "Posse", text: "26. Posse de má-fé ocorre quando o possuidor:", options: ["Ignora o vício.", "Tem ciência do vício impeditivo.", "Tem justo título.", "É locatário."], correct: 1, explanation: "Art. 1.201 do CC." },
                { subject: "Direito Civil", topic: "Responsabilidade", text: "27. Dono de animal responde pelo dano se não provar:", options: ["Amizade com a vítima.", "Culpa da vítima ou força maior.", "Que o bicho é vacinado.", "Que não estava em casa."], correct: 1, explanation: "Art. 936 do CC." },
                { subject: "Direito Civil", topic: "Família", text: "28. Na união estável sem contrato, bens de herança são:", options: ["Partilhados.", "Excluídos da comunhão.", "Doados.", "Meados."], correct: 1, explanation: "Art. 1.659 do CC." },
                { subject: "Direito Civil", topic: "Sucessão", text: "29. Sem descendentes ou ascendentes, herda:", options: ["Estado.", "Cônjuge sobrevivente.", "Irmãos.", "Município."], correct: 1, explanation: "Art. 1.829, III do CC." },
                { subject: "ECA", topic: "Adoção", text: "30. Adoção por procuração é:", options: ["Permitida.", "Vedada expressamente.", "Obrigatória.", "Aceita via cartório."], correct: 1, explanation: "Art. 39 do ECA." },
                { subject: "ECA", topic: "Internação", text: "31. Internação de adolescente exige:", options: ["Qualquer crime.", "Violência ou grave ameaça.", "Pedido dos pais.", "Mera vadiagem."], correct: 1, explanation: "Art. 122 do ECA." },
                { subject: "Consumidor", topic: "Fato", text: "32. Prazo para reparação por explosão de produto:", options: ["90 dias.", "1 ano.", "5 anos.", "10 anos."], correct: 2, explanation: "Art. 27 do CDC." },
                { subject: "Consumidor", topic: "Reflexão", text: "33. Direito de arrependimento online:", options: ["24h.", "7 dias.", "15 dias.", "30 dias."], correct: 1, explanation: "Art. 49 do CDC." },
                { subject: "Consumidor", topic: "Publicidade", text: "34. Omitir dado essencial sobre o produto é publicidade:", options: ["Enganosa.", "Abusiva.", "Comparativa.", "Lícita."], correct: 0, explanation: "Art. 37 do CDC." },
                { subject: "Consumidor", topic: "Ônus", text: "35. Inversão do ônus da prova no CDC exige:", options: ["Morte do consumidor.", "Verossimilhança ou Hipossuficiência.", "Advogado público.", "Pedido do MP."], correct: 1, explanation: "Art. 6, VIII do CDC." },
                { subject: "Empresarial", topic: "Aval", text: "36. Aval parcial no Código Civil é:", options: ["Permitido.", "Vedado.", "Facultativo.", "Nulo de pleno direito."], correct: 1, explanation: "Art. 897 do CC." },
                { subject: "Empresarial", topic: "Patente", text: "37. Prazo da patente de invenção:", options: ["10 anos.", "15 anos.", "20 anos.", "Sempre."], correct: 2, explanation: "Lei 9.279." },
                { subject: "Empresarial", topic: "Limitada", text: "38. Sócios respondem solidariamente pela:", options: ["Integralização do capital.", "Dívida pessoal do sócio.", "Multas de trânsito.", "Crimes do síndico."], correct: 0, explanation: "Art. 1.052 do CC." },
                { subject: "Empresarial", topic: "Falência", text: "39. Crédito trabalhista na falência vai até:", options: ["50 salários.", "150 salários.", "Sem limite.", "100 salários."], correct: 1, explanation: "Lei 11.101." },
                { subject: "Empresarial", topic: "SLU", text: "40. A sociedade de um único sócio chama-se:", options: ["EIRELI.", "Sociedade Limitada Unipessoal.", "MEI.", "S.A. de um."], correct: 1, explanation: "Lei da Liberdade Econômica." },
                { subject: "Processo Civil", topic: "Prazos", text: "41. Prazos processuais no CPC são em:", options: ["Dias corridos.", "Dias úteis.", "Horas.", "Semanas."], correct: 1, explanation: "Art. 219 CPC." },
                { subject: "Processo Civil", topic: "Foro", text: "42. Ação sobre imóvel corre no foro da:", options: ["Autor.", "Réu.", "Situação da coisa.", "Capital."], correct: 2, explanation: "Art. 47 CPC." },
                { subject: "Processo Civil", topic: "Intervenção", text: "43. Chamar codevedor ao processo é:", options: ["Assistência.", "Denunciação.", "Chamamento ao processo.", "Oposição."], correct: 2, explanation: "Art. 130 CPC." },
                { subject: "Processo Civil", topic: "Tutela", text: "44. Tutela de urgência exige:", options: ["Probabilidade e Perigo.", "Certeza.", "Pobreza.", "Dolo."], correct: 0, explanation: "Art. 300 CPC." },
                { subject: "Processo Civil", topic: "Execução", text: "45. Não pagar sentença em 15 dias gera multa de:", options: ["2%.", "10%.", "20%.", "50%."], correct: 1, explanation: "Art. 523 CPC." },
                { subject: "Processo Civil", topic: "Recursos", text: "46. Decisão de mérito interlocutória gera:", options: ["Apelação.", "Agravo de Instrumento.", "Embargos.", "RO."], correct: 1, explanation: "Art. 1.015 CPC." },
                { subject: "Processo Civil", topic: "Embargos", text: "47. Prazo de Embargos de Declaração:", options: ["5 dias.", "15 dias.", "30 dias.", "8 dias."], correct: 0, explanation: "Art. 1.023 CPC." },
                { subject: "Processo Civil", topic: "Rescisória", text: "48. Prazo da ação rescisória:", options: ["1 ano.", "2 anos.", "5 anos.", "10 anos."], correct: 1, explanation: "Art. 975 CPC." },
                { subject: "Processo Civil", topic: "Revelia", text: "49. Revelia presume fatos verdadeiros:", options: ["Falso.", "Verdadeiro.", "Só em valor baixo.", "Só se o réu sumir."], correct: 1, explanation: "Art. 344 CPC." },
                { subject: "Processo Civil", topic: "Sentença", text: "50. Sentença que não julga mérito é art:", options: ["485.", "487.", "1.", "100."], correct: 0, explanation: "Art. 485 CPC." },
                { subject: "Direito Penal", topic: "Teoria", text: "51. Vítima morre em incêndio no hospital. Agressor responde por:", options: ["Consumado.", "Tentativa.", "Culposo.", "Lesão."], correct: 1, explanation: "Art. 13 CP." },
                { subject: "Direito Penal", topic: "Crimes", text: "52. Subtrair com ameaça é:", options: ["Furto.", "Roubo.", "Extorsão.", "Estelionato."], correct: 1, explanation: "Art. 157 CP." },
                { subject: "Direito Penal", topic: "Legítima Defesa", text: "53. Agente responde por excesso?", options: ["Não.", "Sim, dolo ou culpa.", "Só se matar.", "Só no tráfico."], correct: 1, explanation: "Art. 23 CP." },
                { subject: "Direito Penal", topic: "Prescrição", text: "54. Menor de 21 anos tem prescrição reduzida:", options: ["Não.", "Sim, pela metade.", "Sim, em 1/3.", "Não existe."], correct: 1, explanation: "Art. 115 CP." },
                { subject: "Direito Penal", topic: "Reincidência", text: "55. Prazo depurador da reincidência:", options: ["2 anos.", "5 anos.", "10 anos.", "Eterno."], correct: 1, explanation: "Art. 64 CP." },
                { subject: "Direito Penal", topic: "Pena", text: "56. Regime para 5 anos (não reincidente):", options: ["Fechado.", "Semiaberto.", "Aberto.", "Prisão-casa."], correct: 1, explanation: "Art. 33 CP." },
                { subject: "Direito Penal", topic: "Meio", text: "57. Ineficácia absoluta do meio é:", options: ["Tentativa.", "Crime Impossível.", "Erro.", "Desistência."], correct: 1, explanation: "Art. 17 CP." },
                { subject: "Direito Penal", topic: "Dolo", text: "58. Erro de tipo exclui:", options: ["Dolo.", "Culpa.", "Punibilidade.", "Tudo."], correct: 0, explanation: "Art. 20 CP." },
                { subject: "Direito Penal", topic: "Sursis", text: "59. Sursis penal aplica-se até penas de:", options: ["1 ano.", "2 anos.", "4 anos.", "5 anos."], correct: 1, explanation: "Art. 77 CP." },
                { subject: "Direito Penal", topic: "Extinção", text: "60. Morte do agente gera extinção da:", options: ["Culpa.", "Punibilidade.", "Tipicidade.", "Ilicitude."], correct: 1, explanation: "Art. 107 CP." },
                { subject: "Processo Penal", topic: "IP", text: "61. Inquérito é:", options: ["Contraditório.", "Inquisitivo.", "Público.", "Judicial."], correct: 1, explanation: "IP é inquisitivo." },
                { subject: "Processo Penal", topic: "Prisão", text: "62. Preventiva como antecipação de pena é:", options: ["Permitida.", "Vedada.", "Obrigatória.", "Livre."], correct: 1, explanation: "Art. 313 CPP." },
                { subject: "Processo Penal", topic: "Júri", text: "63. Pronúncia encerra 1ª fase do júri:", options: ["Falso.", "Verdadeiro.", "Depende.", "Só em roubo."], correct: 1, explanation: "Art. 413 CPP." },
                { subject: "Processo Penal", topic: "Recursos", text: "64. Recurso contra rejeição de denúncia:", options: ["Apelação.", "RESE.", "Agravo.", "Carta."], correct: 1, explanation: "Art. 581 CPP." },
                { subject: "Processo Penal", topic: "Flagrante", text: "65. Comunicar flagrante ao juiz em:", options: ["12h.", "24h.", "48h.", "Imediato."], correct: 1, explanation: "Art. 306 CPP." },
                { subject: "Processo Penal", topic: "Liberdade", text: "66. Liberdade sem fiança é possível?", options: ["Não.", "Sim.", "Só para pobres.", "Só em furto."], correct: 1, explanation: "Art. 310 CPP." },
                { subject: "Processo Penal", topic: "Citação", text: "67. Citação do militar faz-se pelo:", options: ["Edital.", "Chefe do serviço.", "Oficial.", "Correio."], correct: 1, explanation: "Art. 358 CPP." },
                { subject: "Processo Penal", topic: "Testemunha", text: "68. Máximo de testemunhas no ordinário:", options: ["3.", "5.", "8.", "10."], correct: 2, explanation: "Art. 401 CPP." },
                { subject: "Processo Penal", topic: "Sentença", text: "69. Mutatio libelli exige aditamento:", options: ["Não.", "Sim.", "Livre.", "Erro."], correct: 1, explanation: "Art. 384 CPP." },
                { subject: "Processo Penal", topic: "Apelação", text: "70. Prazo apelação criminal:", options: ["5 dias.", "8 dias.", "15 dias.", "10 dias."], correct: 0, explanation: "Art. 593 CPP." },
                { subject: "Direito Trabalho", topic: "Contrato", text: "71. Alteração ilícita é a que gera:", options: ["Lucro.", "Prejuízo ao empregado.", "Promoção.", "Mudança de mesa."], correct: 1, explanation: "Art. 468 CLT." },
                { subject: "Direito Trabalho", topic: "Jornada", text: "72. Jornada semanal padrão:", options: ["40h.", "44h.", "48h.", "36h."], correct: 1, explanation: "Art. 7 CF." },
                { subject: "Direito Trabalho", topic: "Justa Causa", text: "73. Embriaguez habitual gera justa causa?", options: ["Não.", "Sim.", "Só no bar.", "Suspensão."], correct: 1, explanation: "Art. 482 CLT." },
                { subject: "Direito Trabalho", topic: "FGTS", text: "74. Alíquota mensal FGTS:", options: ["2%.", "8%.", "11%.", "20%."], correct: 1, explanation: "Lei 8036." },
                { subject: "Direito Trabalho", topic: "Equiparação", text: "75. Tempo na função máximo:", options: ["1 ano.", "2 anos.", "4 anos.", "5 anos."], correct: 1, explanation: "Art. 461 CLT." },
                { subject: "Processo Trabalho", topic: "RO", text: "76. Prazo Recurso Ordinário:", options: ["5 dias.", "8 dias.", "15 dias.", "10 dias."], correct: 1, explanation: "Art. 895 CLT." },
                { subject: "Processo Trabalho", topic: "Sumaríssimo", text: "77. Teto rito sumaríssimo (salários):", options: ["20.", "40.", "60.", "100."], correct: 1, explanation: "Art. 852-A CLT." },
                { subject: "Direito Trabalho", topic: "Estabilidade", text: "78. Gestante estável até:", options: ["Parto.", "5 meses após parto.", "1 ano.", "Aposentar."], correct: 1, explanation: "ADCT." },
                { subject: "Processo Trabalho", topic: "Execução", text: "79. Prazo para pagar na execução:", options: ["24h.", "48h.", "15 dias.", "5 dias."], correct: 1, explanation: "Art. 880 CLT." },
                { subject: "Direito Trabalho", topic: "Aviso", text: "80. Aviso prévio proporcional max dias:", options: ["30.", "60.", "90.", "120."], correct: 2, explanation: "Lei 12.506." }
            ]
        };

        let currentExam = [];
        let currentIdx = 0;
        let qTimer;
        let secondsInQuestion = 0;
        let totalSeconds = 5 * 60 * 60;
        let userResponses = Array(80).fill(null); // [ {correct: true/false, subject: ''} ]

        function startQuiz(examKey) {
            currentExam = allExams[examKey];
            document.getElementById('home-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            buildSidebar();
            loadQuestion(0);
            startTotalTimer();
        }

        function buildSidebar() {
            const grid = document.getElementById('questions-grid');
            grid.innerHTML = '';
            for(let i=0; i<80; i++) {
                const div = document.createElement('button');
                div.id = `side-q-${i}`;
                div.className = "w-full py-2 rounded-lg bg-slate-50 border border-slate-200 transition-all hover:border-blue-300";
                div.innerText = i + 1;
                div.onclick = () => loadQuestion(i);
                grid.appendChild(div);
            }
        }

        function loadQuestion(idx) {
            currentIdx = idx;
            const q = currentExam[idx];
            
            // UI Update
            document.querySelectorAll('[id^="side-q-"]').forEach(el => el.classList.remove('sidebar-active'));
            document.getElementById(`side-q-${idx}`).classList.add('sidebar-active');
            
            document.getElementById('subject-tag').innerText = q.subject;
            document.getElementById('topic-tag').innerText = "TEMA: " + q.topic;
            document.getElementById('question-text').innerText = q.text;
            document.getElementById('current-idx-display').innerText = idx + 1;
            
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            
            q.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "option-btn w-full text-left p-5 border-2 border-slate-200 rounded-xl hover:bg-blue-50 transition-all flex items-start font-medium";
                btn.innerHTML = `<span class="font-black text-blue-500 mr-4">${String.fromCharCode(65 + i)}</span> ${opt}`;
                
                // Se já respondeu
                if(userResponses[idx] !== null) {
                    btn.disabled = true;
                    if(i === q.correct) btn.classList.add('correct');
                    if(i === userResponses[idx].selected && i !== q.correct) btn.classList.add('wrong');
                } else {
                    btn.onclick = () => checkAnswer(i, q.correct, q.explanation);
                }
                container.appendChild(btn);
            });

            if(userResponses[idx] !== null) {
                showFeedback(q.explanation);
            } else {
                document.getElementById('feedback').classList.add('hidden');
            }
            
            resetQuestionTimer();
        }

        function checkAnswer(selected, correct, explanation) {
            const isCorrect = (selected === correct);
            userResponses[currentIdx] = { 
                selected: selected, 
                correct: isCorrect, 
                subject: currentExam[currentIdx].subject 
            };
            
            // Update Sidebar
            const sideBtn = document.getElementById(`side-q-${currentIdx}`);
            sideBtn.classList.add(isCorrect ? 'sidebar-correct' : 'sidebar-wrong');

            loadQuestion(currentIdx); // Reload to show styles
            
            // Se for a última, mostra dashboard após delay
            if(currentIdx === 79) {
                setTimeout(showFinalResults, 2000);
            }
        }

        function showFeedback(text) {
            const fb = document.getElementById('feedback');
            document.getElementById('justification-text').innerText = text;
            fb.classList.remove('hidden');
        }

        function nextQuestion() { if(currentIdx < 79) loadQuestion(currentIdx + 1); else showFinalResults(); }
        function prevQuestion() { if(currentIdx > 0) loadQuestion(currentIdx - 1); }

        function showFinalResults() {
            document.getElementById('main-quiz-area').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            
            const totalAcertos = userResponses.filter(r => r && r.correct).length;
            document.getElementById('score-total').innerText = totalAcertos;
            document.getElementById('score-percent').innerText = `${Math.round((totalAcertos/80)*100)}% de acerto total`;

            // Report por Matéria
            const stats = {};
            userResponses.forEach(r => {
                if(!r) return;
                if(!stats[r.subject]) stats[r.subject] = { total: 0, hits: 0 };
                stats[r.subject].total++;
                if(r.correct) stats[r.subject].hits++;
            });

            const reportContainer = document.getElementById('subject-report');
            reportContainer.innerHTML = '';
            
            for(let sub in stats) {
                const percent = Math.round((stats[sub].hits / stats[sub].total) * 100);
                const color = percent >= 60 ? 'text-green-600' : 'text-red-600';
                const div = document.createElement('div');
                div.className = "flex justify-between items-center border-b border-slate-100 pb-2";
                div.innerHTML = `
                    <span class="text-sm font-medium text-slate-600">${sub}</span>
                    <span class="text-sm font-black ${color}">${percent}% (${stats[sub].hits}/${stats[sub].total})</span>
                `;
                reportContainer.appendChild(div);
            }
        }

        // Timers
        function resetQuestionTimer() {
            clearInterval(qTimer); secondsInQuestion = 0;
            qTimer = setInterval(() => {
                secondsInQuestion++;
                const m = Math.floor(secondsInQuestion / 60).toString().padStart(2, '0');
                const s = (secondsInQuestion % 60).toString().padStart(2, '0');
                document.getElementById('question-timer').innerText = `${m}:${s}`;
            }, 1000);
        }

        function startTotalTimer() {
            setInterval(() => {
                if(totalSeconds > 0) {
                    totalSeconds--;
                    const h = Math.floor(totalSeconds / 3600).toString().padStart(2, '0');
                    const m = Math.floor((totalSeconds % 3600) / 60).toString().padStart(2, '0');
                    const s = (totalSeconds % 60).toString().padStart(2, '0');
                    document.getElementById('total-timer').innerText = `${h}:${m}:${s}`;
                }
            }, 1000);
        }
    </script>
</body>
</html>