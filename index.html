<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulado OAB Pro - Painel Completo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .correct { border: 3px solid #10b981 !important; background-color: #ecfdf5 !important; }
        .wrong { border: 3px solid #ef4444 !important; background-color: #fef2f2 !important; }
        .sidebar-correct { background-color: #10b981 !important; color: white !important; border: none !important; }
        .sidebar-wrong { background-color: #ef4444 !important; color: white !important; border: none !important; }
        .sidebar-review { background-color: #f59e0b !important; color: white !important; border: none !important; }
        .sidebar-active { outline: 3px solid #3b82f6; outline-offset: 2px; }
        .hidden { display: none !important; }
        .option-btn:disabled { opacity: 1; cursor: default; }
    </style>
</head>
<body class="bg-slate-50 font-sans text-gray-900">

    <div id="home-screen" class="max-w-2xl mx-auto mt-20 p-6">
        <div class="text-center mb-10">
            <h1 class="text-4xl font-black text-slate-800 mb-2 italic text-blue-600">Simulado OAB Pro</h1>
            <p class="text-slate-500 font-medium">Mapa de quest√µes, Chutes e Desempenho por mat√©ria</p>
        </div>
        <div class="grid grid-cols-1 gap-6">
            <button onclick="startQuiz('OAB44')" class="group p-8 bg-white border-2 border-blue-600 rounded-2xl shadow-xl hover:scale-105 transition-all text-left">
                <span class="text-blue-600 font-bold text-xs uppercase tracking-widest">Exame 44 Oficial</span>
                <h2 class="text-2xl font-bold text-slate-800 mt-1">Iniciar Simulado Completo</h2>
                <p class="text-slate-500 text-sm mt-2 font-medium italic">80 quest√µes reais com an√°lise detalhada ao final.</p>
                <div class="mt-4 text-blue-600 font-bold italic underline">CLIQUE PARA INICIAR ‚Üí</div>
            </button>
        </div>
    </div>

    <div id="quiz-screen" class="max-w-[1440px] mx-auto p-4 flex flex-row gap-6 hidden">
        
        <aside class="w-64 bg-white rounded-2xl shadow-lg p-5 sticky top-4 h-[calc(100vh-2rem)] overflow-y-auto border border-slate-200 flex-shrink-0">
            <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-5 text-center border-b pb-2">Mapa de Quest√µes</h3>
            <div id="questions-grid" class="grid grid-cols-4 gap-2 text-center text-xs font-bold">
                </div>
            
            <div class="mt-8 space-y-3 pt-6 border-t border-slate-100">
                <div class="flex items-center gap-2 text-[10px] uppercase font-bold text-slate-400">
                    <div class="w-3 h-3 bg-green-500 rounded-sm"></div> Acerto
                </div>
                <div class="flex items-center gap-2 text-[10px] uppercase font-bold text-slate-400">
                    <div class="w-3 h-3 bg-red-500 rounded-sm"></div> Erro
                </div>
                <div class="flex items-center gap-2 text-[10px] uppercase font-bold text-slate-400">
                    <div class="w-3 h-3 bg-yellow-500 rounded-sm"></div> Chutei/Rever
                </div>
            </div>
        </aside>

        <div class="flex-1">
            <header class="flex justify-between items-center bg-white p-4 rounded-2xl shadow-sm mb-6 sticky top-2 z-10 border border-slate-200">
                <button onclick="location.reload()" class="text-[10px] font-black text-blue-600 uppercase tracking-widest">‚Üê Menu</button>
                <div id="total-timer" class="text-2xl font-mono font-black text-slate-700">05:00:00</div>
                <div id="question-timer" class="text-lg font-mono font-bold text-blue-400">00:00</div>
            </header>

            <main id="main-quiz-area" class="bg-white p-6 md:p-12 rounded-[2.5rem] shadow-2xl border border-slate-100 relative">
                <div class="flex justify-between items-start mb-8">
                    <div>
                        <span id="subject-tag" class="bg-slate-900 text-white text-[10px] font-black px-4 py-1 rounded-md uppercase tracking-tighter mr-2"></span>
                        <span id="topic-tag" class="text-[10px] text-blue-500 font-bold uppercase py-1 italic tracking-tight"></span>
                    </div>
                    <button id="btn-review" onclick="toggleReview()" class="flex items-center gap-2 px-3 py-1 border-2 border-yellow-400 text-yellow-600 rounded-full text-[10px] font-black uppercase hover:bg-yellow-100 transition-all shadow-sm">
                        ü§î Chutei, preciso rever
                    </button>
                </div>
                
                <h2 id="question-text" class="text-xl font-medium leading-relaxed text-slate-800 mb-10 text-justify"></h2>
                <div id="options-container" class="space-y-4"></div>

                <div id="feedback" class="mt-10 p-8 bg-blue-50 rounded-3xl border-l-[12px] border-blue-600 hidden">
                    <h4 class="font-black text-blue-900 mb-3 uppercase text-xs tracking-widest italic">‚öñÔ∏è Fundamenta√ß√£o Legal:</h4>
                    <p id="justification-text" class="text-slate-700 text-sm leading-relaxed mb-4"></p>
                    <div class="bg-white p-3 rounded-xl border border-blue-100 inline-block shadow-sm">
                        <p class="text-[11px] font-bold text-blue-600 uppercase tracking-tighter">üìö O que estudar para dominar este tema:</p>
                        <p id="study-tip" class="text-slate-600 text-sm italic font-medium"></p>
                    </div>
                </div>

                <footer class="mt-12 pt-8 border-t border-slate-100 flex justify-between items-center">
                    <button onclick="prevQuestion()" class="text-slate-400 hover:text-slate-900 font-black text-xs uppercase tracking-widest">Anterior</button>
                    <div class="text-[10px] font-black text-slate-300 uppercase tracking-widest">Quest√£o <span id="current-idx-display" class="text-slate-800 text-sm">1</span> / 80</div>
                    <button onclick="nextQuestion()" class="bg-blue-600 hover:bg-blue-700 text-white font-black px-10 py-4 rounded-2xl transition shadow-xl uppercase text-xs tracking-widest">Pr√≥xima</button>
                </footer>
            </main>

            <div id="result-screen" class="hidden bg-white p-10 rounded-[3rem] shadow-2xl border border-slate-100">
                <h2 class="text-4xl font-black text-slate-800 mb-8 text-center italic tracking-tighter">Relat√≥rio de Desempenho</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="bg-slate-900 p-8 rounded-3xl text-center text-white lg:col-span-1">
                        <span class="text-[10px] font-black uppercase text-slate-400 tracking-[0.3em]">Acertos Totais</span>
                        <div class="text-7xl font-black my-4"><span id="score-total">0</span><span class="text-2xl text-slate-500">/80</span></div>
                        <div id="score-percent" class="text-sm font-bold text-blue-400 italic"></div>
                    </div>
                    
                    <div class="lg:col-span-2">
                        <h3 class="font-black text-slate-800 uppercase text-[10px] mb-6 tracking-widest border-b pb-2 flex items-center gap-2">
                            üîç Desempenho por Mat√©ria
                        </h3>
                        <div id="subject-report" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                    </div>
                </div>

                <div id="review-summary" class="mt-10 p-6 bg-yellow-50 rounded-2xl border-2 border-yellow-200 hidden">
                    <h4 class="font-black text-yellow-800 text-xs uppercase mb-3 italic tracking-widest">‚ö†Ô∏è Alerta de D√∫vidas (Chutes):</h4>
                    <p id="review-list" class="text-sm text-yellow-700 leading-relaxed font-medium"></p>
                </div>

                <div class="mt-10 text-center">
                    <button onclick="location.reload()" class="px-12 py-4 bg-blue-600 text-white font-black rounded-2xl hover:bg-blue-700 transition-all shadow-lg uppercase tracking-widest text-xs">Recome√ßar Estudos</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // BANCO DE DADOS COMPLETO (ORDEM OAB)
        const allExams = {
            "OAB44": [
                { subject: "√âtica Profissional", topic: "Sociedade", text: "1. Gomes, advogado, decide constituir uma sociedade unipessoal. Ap√≥s registro, √© convidado a integrar uma sociedade pluripessoal na mesma base territorial. Segundo o EAOAB:", options: ["Pode integrar ambas livremente.", "N√£o pode integrar mais de uma sociedade de advogados na mesma base territorial.", "Pode integrar se houver autoriza√ß√£o da Seccional.", "Pode, pois uma delas √© unipessoal."], correct: 1, explanation: "Art. 15, ¬ß 4¬∫ do EAOAB: O advogado n√£o pode pertencer a mais de uma sociedade na mesma base territorial." },
                { subject: "√âtica Profissional", topic: "Mandato", text: "2. O advogado D√™nis decidiu renunciar ao mandato em uma a√ß√£o trabalhista por desentendimento com o cliente. Sobre os deveres de D√™nis:", options: ["A ren√∫ncia dispensa comunica√ß√£o se feita ao juiz.", "D√™nis deve notificar o cliente e represent√°-lo pelos 10 dias seguintes √† notifica√ß√£o.", "O dever de representar cessa no ato da postagem da carta.", "√â proibido renunciar ap√≥s a fase de instru√ß√£o."], correct: 1, explanation: "Art. 112 do CPC e Art. 5¬∫ do Estatuto da OAB." },
                { subject: "√âtica Profissional", topic: "Publicidade", text: "3. Uma sociedade de advogados decide impulsionar posts informativos em redes sociais sobre teses jur√≠dicas. Segundo o Provimento 205/2021 do CFOAB:", options: ["Qualquer impulsionamento √© vedado.", "√â permitido o impulsionamento desde que n√£o configure mercantiliza√ß√£o ou capta√ß√£o indevida.", "Pode-se usar fotos dos ve√≠culos e bens dos s√≥cios.", "√â permitido citar nomes de clientes para dar autoridade."], correct: 1, explanation: "O Provimento 205/2021 permite marketing jur√≠dico informativo." },
                { subject: "√âtica Profissional", topic: "Incompatibilidade", text: "4. Pedro, advogado, foi eleito Vereador e assumiu a Presid√™ncia da C√¢mara Municipal. Segundo o Estatuto da OAB:", options: ["Pedro est√° apenas impedido contra a Fazenda P√∫blica.", "Pedro est√° incompatibilizado de exercer a advocacia totalmente enquanto no cargo.", "Pedro pode advogar normalmente no escrit√≥rio.", "Ele deve cancelar a OAB e fazer novo exame depois."], correct: 1, explanation: "Art. 28, VI do EAOAB estabelece incompatibilidade total tempor√°ria." },
                { subject: "√âtica Profissional", topic: "Honor√°rios", text: "5. Sobre o recebimento de honor√°rios em caso de substabelecimento sem reserva de poderes:", options: ["O advogado anterior perde o direito aos honor√°rios.", "O advogado substabelecente tem direito a receber honor√°rios proporcionais ao trabalho.", "Os honor√°rios s√£o divididos igualmente entre todos.", "A OAB arbitra o valor em 20%."], correct: 1, explanation: "O advogado que sai da causa tem direito ao recebimento proporcional ao servi√ßo." },
                { subject: "√âtica Profissional", topic: "Gestante", text: "6. A advogada Maria, gestante, comparece √† audi√™ncia e encontra fila. Ela possui direito a:", options: ["Prefer√™ncia na ordem das audi√™ncias do dia.", "Isen√ß√£o de custas processuais.", "Adiamento autom√°tico por 30 dias.", "Acesso apenas se for acompanhada."], correct: 0, explanation: "Art. 7-A, I, 'a' do EAOAB garante prefer√™ncia para gestantes." },
                { subject: "√âtica Profissional", topic: "Sigilo", text: "7. O advogado √© intimado a depor como testemunha sobre fato confidencial de cliente. Ele deve:", options: ["Depor, se houver interesse da justi√ßa.", "Recusar-se a depor, protegendo o sigilo que √© direito e dever.", "Depor se o cliente autorizar oralmente.", "Apenas depor se for em segredo de justi√ßa."], correct: 1, explanation: "O sigilo profissional √© inviol√°vel e o advogado tem o dever de se recusar." },
                { subject: "√âtica Profissional", topic: "Incompatibilidade", text: "8. Manter conduta incompat√≠vel com a advocacia, como incontin√™ncia p√∫blica escandalosa, gera:", options: ["Censura.", "Suspens√£o.", "Exclus√£o.", "Multa apenas."], correct: 1, explanation: "Art. 37, I do EAOAB prev√™ suspens√£o." },
                { subject: "Direito Constitucional", topic: "ADI", text: "9. Sobre a legitimidade do Governador para propor A√ß√£o Direta de Inconstitucionalidade (ADI):", options: ["√â legitimado universal.", "√â legitimado especial, devendo provar pertin√™ncia tem√°tica.", "S√≥ pode propor ADI contra leis federais.", "Precisa de autoriza√ß√£o da Assembleia."], correct: 1, explanation: "Art. 103, V da CF e jurisprud√™ncia do STF." },
                { subject: "Direito Constitucional", topic: "Rem√©dios", text: "10. Para assegurar o conhecimento de informa√ß√µes relativas √† pessoa do impetrante em bancos governamentais, cabe:", options: ["Mandado de Seguran√ßa.", "Habeas Data.", "Habeas Corpus.", "Mandado de Injun√ß√£o."], correct: 1, explanation: "Art. 5¬∫, LXXII, 'a' da CF." },
                { subject: "Direito Constitucional", topic: "Poder Executivo", text: "11. Lei que cria cargos na administra√ß√£o p√∫blica federal √© de iniciativa privativa do:", options: ["Presidente da Rep√∫blica.", "Congresso Nacional.", "STF.", "Ministro da Justi√ßa."], correct: 0, explanation: "Art. 61, ¬ß 1¬∫ da CF." },
                { subject: "Direito Constitucional", topic: "Estado S√≠tio", text: "12. A como√ß√£o grave de repercuss√£o nacional autoriza a decreta√ß√£o de:", options: ["Estado de Defesa.", "Estado de S√≠tio.", "Interven√ß√£o Municipal.", "Garantia da Lei e Ordem."], correct: 1, explanation: "Art. 137, I da CF." },
                { subject: "Direito Constitucional", topic: "CPI", text: "13. As CPIs podem, por autoridade pr√≥pria:", options: ["Quebrar sigilo banc√°rio.", "Determinar pris√£o preventiva.", "Anular atos do Executivo.", "Impedir sa√≠da do pa√≠s."], correct: 0, explanation: "CPIs t√™m poderes de instru√ß√£o judicial (quebra de sigilo banc√°rio e fiscal)." },
                { subject: "Direito Constitucional", topic: "Controle Externo", text: "14. A C√¢mara Municipal exerce controle externo com aux√≠lio do:", options: ["TCU.", "Tribunal de Contas do Estado ou Munic√≠pio.", "MP Federal.", "Senado."], correct: 1, explanation: "Art. 31, ¬ß 1¬∫ da CF." },
                { subject: "Direito Constitucional", topic: "San√ß√£o", text: "15. O sil√™ncio do Presidente da Rep√∫blica por 15 dias √∫teis sobre projeto aprovado importa em:", options: ["Veto t√°cito.", "San√ß√£o t√°cita.", "Caducidade.", "Arquivamento."], correct: 1, explanation: "Art. 66, ¬ß 3¬∫ da CF." },
                { subject: "Direito Administrativo", topic: "Servi√ßo P√∫blico", text: "16. Suspens√£o de servi√ßo p√∫blico de transporte sem autoriza√ß√£o fere o princ√≠pio da:", options: ["Legalidade.", "Continuidade.", "Impessoalidade.", "Modicidade."], correct: 1, explanation: "O servi√ßo adequado deve satisfazer a continuidade." },
                { subject: "Direito Administrativo", topic: "Atos", text: "17. Remo√ß√£o de servidor como forma de puni√ß√£o por cr√≠tica configura:", options: ["Poder disciplinar.", "Desvio de finalidade.", "Motiva√ß√£o nula.", "Ato vinculado."], correct: 1, explanation: "O desvio de finalidade ocorre quando o ato visa fim diverso do interesse p√∫blico." },
                { subject: "Direito Administrativo", topic: "Interven√ß√£o", text: "18. Uso de terreno vizinho para apoiar obra p√∫blica por 6 meses √©:", options: ["Servid√£o.", "Ocupa√ß√£o Tempor√°ria.", "Requisi√ß√£o.", "Limita√ß√£o."], correct: 1, explanation: "Art. 36 do DL 3365/41." },
                { subject: "Direito Administrativo", topic: "Licita√ß√£o", text: "19. Pela Lei 14.133/21, o contratado √© obrigado a aceitar acr√©scimos de at√©:", options: ["10%.", "25%.", "50%.", "100%."], correct: 1, explanation: "Art. 124 da Lei 14.133." },
                { subject: "Direito Administrativo", topic: "Empresas", text: "20. A cria√ß√£o de subsidi√°rias de empresas p√∫blicas:", options: ["√â livre.", "Depende de autoriza√ß√£o legislativa.", "Depende de plebiscito.", "√â proibida."], correct: 1, explanation: "Art. 37, XX da CF." },
                { subject: "Direito Administrativo", topic: "Responsabilidade", text: "21. Responsabilidade do Estado por atos omissivos, via de regra, √©:", options: ["Objetiva.", "Subjetiva.", "Integral.", "Inexistente."], correct: 1, explanation: "Teoria da Culpa do Servi√ßo." },
                { subject: "Direito Civil", topic: "Desconsidera√ß√£o", text: "22. Desvio de finalidade na pessoa jur√≠dica exige:", options: ["Insolv√™ncia.", "Prop√≥sito de lesar credores ou atos il√≠citos.", "Fal√™ncia.", "Confus√£o patrimonial."], correct: 1, explanation: "Art. 50 do C√≥digo Civil." },
                { subject: "Direito Civil", topic: "Bens", text: "23. O direito √† sucess√£o aberta √© considerado:", options: ["Bem m√≥vel.", "Bem im√≥vel por lei.", "Bem infung√≠vel.", "Patrim√¥nio moral."], correct: 1, explanation: "Art. 80, II do CC." },
                { subject: "Direito Civil", topic: "Defeitos", text: "24. Estado de perigo exige que o dano seja:", options: ["Desconhecido pela outra parte.", "Conhecido pela outra parte.", "Apenas financeiro.", "Futuro e incerto."], correct: 1, explanation: "Art. 156 do CC." },
                { subject: "Direito Civil", topic: "Prescri√ß√£o", text: "25. Prazos prescricionais podem ser alterados pelas partes?", options: ["Sim.", "N√£o, s√£o fixados em lei.", "Apenas para reduzir.", "Apenas em contratos de consumo."], correct: 1, explanation: "Art. 192 do CC." },
                { subject: "Direito Civil", topic: "Posse", text: "26. Posse de m√°-f√© ocorre quando o possuidor:", options: ["Ignora o v√≠cio.", "Tem ci√™ncia do v√≠cio impeditivo.", "Tem justo t√≠tulo.", "√â locat√°rio."], correct: 1, explanation: "Art. 1.201 do CC." },
                { subject: "Direito Civil", topic: "Responsabilidade", text: "27. Dono de animal responde pelo dano se n√£o provar:", options: ["Amizade com a v√≠tima.", "Culpa da v√≠tima ou for√ßa maior.", "Que o bicho √© vacinado.", "Que n√£o estava em casa."], correct: 1, explanation: "Art. 936 do CC." },
                { subject: "Direito Civil", topic: "Fam√≠lia", text: "28. Na uni√£o est√°vel sem contrato, bens de heran√ßa s√£o:", options: ["Partilhados.", "Exclu√≠dos da comunh√£o.", "Doados.", "Meados."], correct: 1, explanation: "Art. 1.659 do CC." },
                { subject: "Direito Civil", topic: "Sucess√£o", text: "29. Sem descendentes ou ascendentes, herda:", options: ["Estado.", "C√¥njuge sobrevivente.", "Irm√£os.", "Munic√≠pio."], correct: 1, explanation: "Art. 1.829, III do CC." },
                { subject: "ECA", topic: "Ado√ß√£o", text: "30. Ado√ß√£o por procura√ß√£o √©:", options: ["Permitida.", "Vedada expressamente.", "Obrigat√≥ria.", "Aceita via cart√≥rio."], correct: 1, explanation: "Art. 39 do ECA." },
                { subject: "ECA", topic: "Interna√ß√£o", text: "31. Interna√ß√£o de adolescente exige:", options: ["Qualquer crime.", "Viol√™ncia ou grave amea√ßa.", "Pedido dos pais.", "Mera vadiagem."], correct: 1, explanation: "Art. 122 do ECA." },
                { subject: "Consumidor", topic: "Fato", text: "32. Prazo para repara√ß√£o por explos√£o de produto:", options: ["90 dias.", "1 ano.", "5 anos.", "10 anos."], correct: 2, explanation: "Art. 27 do CDC." },
                { subject: "Consumidor", topic: "Reflex√£o", text: "33. Direito de arrependimento online:", options: ["24h.", "7 dias.", "15 dias.", "30 dias."], correct: 1, explanation: "Art. 49 do CDC." },
                { subject: "Consumidor", topic: "Publicidade", text: "34. Omitir dado essencial sobre o produto √© publicidade:", options: ["Enganosa.", "Abusiva.", "Comparativa.", "L√≠cita."], correct: 0, explanation: "Art. 37 do CDC." },
                { subject: "Consumidor", topic: "√înus", text: "35. Invers√£o do √¥nus da prova no CDC exige:", options: ["Morte do consumidor.", "Verossimilhan√ßa ou Hipossufici√™ncia.", "Advogado p√∫blico.", "Pedido do MP."], correct: 1, explanation: "Art. 6, VIII do CDC." },
                { subject: "Empresarial", topic: "Aval", text: "36. Aval parcial no C√≥digo Civil √©:", options: ["Permitido.", "Vedado.", "Facultativo.", "Nulo de pleno direito."], correct: 1, explanation: "Art. 897 do CC." },
                { subject: "Empresarial", topic: "Patente", text: "37. Prazo da patente de inven√ß√£o:", options: ["10 anos.", "15 anos.", "20 anos.", "Sempre."], correct: 2, explanation: "Lei 9.279." },
                { subject: "Empresarial", topic: "Limitada", text: "38. S√≥cios respondem solidariamente pela:", options: ["Integraliza√ß√£o do capital.", "D√≠vida pessoal do s√≥cio.", "Multas de tr√¢nsito.", "Crimes do s√≠ndico."], correct: 0, explanation: "Art. 1.052 do CC." },
                { subject: "Empresarial", topic: "Fal√™ncia", text: "39. Cr√©dito trabalhista na fal√™ncia vai at√©:", options: ["50 sal√°rios.", "150 sal√°rios.", "Sem limite.", "100 sal√°rios."], correct: 1, explanation: "Lei 11.101." },
                { subject: "Empresarial", topic: "SLU", text: "40. A sociedade de um √∫nico s√≥cio chama-se:", options: ["EIRELI.", "Sociedade Limitada Unipessoal.", "MEI.", "S.A. de um."], correct: 1, explanation: "Lei da Liberdade Econ√¥mica." },
                { subject: "Processo Civil", topic: "Prazos", text: "41. Prazos processuais no CPC s√£o em:", options: ["Dias corridos.", "Dias √∫teis.", "Horas.", "Semanas."], correct: 1, explanation: "Art. 219 CPC." },
                { subject: "Processo Civil", topic: "Foro", text: "42. A√ß√£o sobre im√≥vel corre no foro da:", options: ["Autor.", "R√©u.", "Situa√ß√£o da coisa.", "Capital."], correct: 2, explanation: "Art. 47 CPC." },
                { subject: "Processo Civil", topic: "Interven√ß√£o", text: "43. Chamar codevedor ao processo √©:", options: ["Assist√™ncia.", "Denuncia√ß√£o.", "Chamamento ao processo.", "Oposi√ß√£o."], correct: 2, explanation: "Art. 130 CPC." },
                { subject: "Processo Civil", topic: "Tutela", text: "44. Tutela de urg√™ncia exige:", options: ["Probabilidade e Perigo.", "Certeza.", "Pobreza.", "Dolo."], correct: 0, explanation: "Art. 300 CPC." },
                { subject: "Processo Civil", topic: "Execu√ß√£o", text: "45. N√£o pagar senten√ßa em 15 dias gera multa de:", options: ["2%.", "10%.", "20%.", "50%."], correct: 1, explanation: "Art. 523 CPC." },
                { subject: "Processo Civil", topic: "Recursos", text: "46. Decis√£o de m√©rito interlocut√≥ria gera:", options: ["Apela√ß√£o.", "Agravo de Instrumento.", "Embargos.", "RO."], correct: 1, explanation: "Art. 1.015 CPC." },
                { subject: "Processo Civil", topic: "Embargos", text: "47. Prazo de Embargos de Declara√ß√£o:", options: ["5 dias.", "15 dias.", "30 dias.", "8 dias."], correct: 0, explanation: "Art. 1.023 CPC." },
                { subject: "Processo Civil", topic: "Rescis√≥ria", text: "48. Prazo da a√ß√£o rescis√≥ria:", options: ["1 ano.", "2 anos.", "5 anos.", "10 anos."], correct: 1, explanation: "Art. 975 CPC." },
                { subject: "Processo Civil", topic: "Revelia", text: "49. Revelia presume fatos verdadeiros:", options: ["Falso.", "Verdadeiro.", "S√≥ em valor baixo.", "S√≥ se o r√©u sumir."], correct: 1, explanation: "Art. 344 CPC." },
                { subject: "Processo Civil", topic: "Senten√ßa", text: "50. Senten√ßa que n√£o julga m√©rito √© art:", options: ["485.", "487.", "1.", "100."], correct: 0, explanation: "Art. 485 CPC." },
                { subject: "Direito Penal", topic: "Teoria", text: "51. V√≠tima morre em inc√™ndio no hospital. Agressor responde por:", options: ["Consumado.", "Tentativa.", "Culposo.", "Les√£o."], correct: 1, explanation: "Art. 13 CP." },
                { subject: "Direito Penal", topic: "Crimes", text: "52. Subtrair com amea√ßa √©:", options: ["Furto.", "Roubo.", "Extors√£o.", "Estelionato."], correct: 1, explanation: "Art. 157 CP." },
                { subject: "Direito Penal", topic: "Leg√≠tima Defesa", text: "53. Agente responde por excesso?", options: ["N√£o.", "Sim, dolo ou culpa.", "S√≥ se matar.", "S√≥ no tr√°fico."], correct: 1, explanation: "Art. 23 CP." },
                { subject: "Direito Penal", topic: "Prescri√ß√£o", text: "54. Menor de 21 anos tem prescri√ß√£o reduzida:", options: ["N√£o.", "Sim, pela metade.", "Sim, em 1/3.", "N√£o existe."], correct: 1, explanation: "Art. 115 CP." },
                { subject: "Direito Penal", topic: "Reincid√™ncia", text: "55. Prazo depurador da reincid√™ncia:", options: ["2 anos.", "5 anos.", "10 anos.", "Eterno."], correct: 1, explanation: "Art. 64 CP." },
                { subject: "Direito Penal", topic: "Pena", text: "56. Regime para 5 anos (n√£o reincidente):", options: ["Fechado.", "Semiaberto.", "Aberto.", "Pris√£o-casa."], correct: 1, explanation: "Art. 33 CP." },
                { subject: "Direito Penal", topic: "Meio", text: "57. Inefic√°cia absoluta do meio √©:", options: ["Tentativa.", "Crime Imposs√≠vel.", "Erro.", "Desist√™ncia."], correct: 1, explanation: "Art. 17 CP." },
                { subject: "Direito Penal", topic: "Dolo", text: "58. Erro de tipo exclui:", options: ["Dolo.", "Culpa.", "Punibilidade.", "Tudo."], correct: 0, explanation: "Art. 20 CP." },
                { subject: "Direito Penal", topic: "Sursis", text: "59. Sursis penal aplica-se at√© penas de:", options: ["1 ano.", "2 anos.", "4 anos.", "5 anos."], correct: 1, explanation: "Art. 77 CP." },
                { subject: "Direito Penal", topic: "Extin√ß√£o", text: "60. Morte do agente gera extin√ß√£o da:", options: ["Culpa.", "Punibilidade.", "Tipicidade.", "Ilicitude."], correct: 1, explanation: "Art. 107 CP." },
                { subject: "Processo Penal", topic: "IP", text: "61. Inqu√©rito √©:", options: ["Contradit√≥rio.", "Inquisitivo.", "P√∫blico.", "Judicial."], correct: 1, explanation: "IP √© inquisitivo." },
                { subject: "Processo Penal", topic: "Pris√£o", text: "62. Preventiva como antecipa√ß√£o de pena √©:", options: ["Permitida.", "Vedada.", "Obrigat√≥ria.", "Livre."], correct: 1, explanation: "Art. 313 CPP." },
                { subject: "Processo Penal", topic: "J√∫ri", text: "63. Pron√∫ncia encerra 1¬™ fase do j√∫ri:", options: ["Falso.", "Verdadeiro.", "Depende.", "S√≥ em roubo."], correct: 1, explanation: "Art. 413 CPP." },
                { subject: "Processo Penal", topic: "Recursos", text: "64. Recurso contra rejei√ß√£o de den√∫ncia:", options: ["Apela√ß√£o.", "RESE.", "Agravo.", "Carta."], correct: 1, explanation: "Art. 581 CPP." },
                { subject: "Processo Penal", topic: "Flagrante", text: "65. Comunicar flagrante ao juiz em:", options: ["12h.", "24h.", "48h.", "Imediato."], correct: 1, explanation: "Art. 306 CPP." },
                { subject: "Processo Penal", topic: "Liberdade", text: "66. Liberdade sem fian√ßa √© poss√≠vel?", options: ["N√£o.", "Sim.", "S√≥ para pobres.", "S√≥ em furto."], correct: 1, explanation: "Art. 310 CPP." },
                { subject: "Processo Penal", topic: "Cita√ß√£o", text: "67. Cita√ß√£o do militar faz-se pelo:", options: ["Edital.", "Chefe do servi√ßo.", "Oficial.", "Correio."], correct: 1, explanation: "Art. 358 CPP." },
                { subject: "Processo Penal", topic: "Testemunha", text: "68. M√°ximo de testemunhas no ordin√°rio:", options: ["3.", "5.", "8.", "10."], correct: 2, explanation: "Art. 401 CPP." },
                { subject: "Processo Penal", topic: "Senten√ßa", text: "69. Mutatio libelli exige aditamento:", options: ["N√£o.", "Sim.", "Livre.", "Erro."], correct: 1, explanation: "Art. 384 CPP." },
                { subject: "Processo Penal", topic: "Apela√ß√£o", text: "70. Prazo apela√ß√£o criminal:", options: ["5 dias.", "8 dias.", "15 dias.", "10 dias."], correct: 0, explanation: "Art. 593 CPP." },
                { subject: "Direito Trabalho", topic: "Contrato", text: "71. Altera√ß√£o il√≠cita √© a que gera:", options: ["Lucro.", "Preju√≠zo ao empregado.", "Promo√ß√£o.", "Mudan√ßa de mesa."], correct: 1, explanation: "Art. 468 CLT." },
                { subject: "Direito Trabalho", topic: "Jornada", text: "72. Jornada semanal padr√£o:", options: ["40h.", "44h.", "48h.", "36h."], correct: 1, explanation: "Art. 7 CF." },
                { subject: "Direito Trabalho", topic: "Justa Causa", text: "73. Embriaguez habitual gera justa causa?", options: ["N√£o.", "Sim.", "S√≥ no bar.", "Suspens√£o."], correct: 1, explanation: "Art. 482 CLT." },
                { subject: "Direito Trabalho", topic: "FGTS", text: "74. Al√≠quota mensal FGTS:", options: ["2%.", "8%.", "11%.", "20%."], correct: 1, explanation: "Lei 8036." },
                { subject: "Direito Trabalho", topic: "Equipara√ß√£o", text: "75. Tempo na fun√ß√£o m√°ximo:", options: ["1 ano.", "2 anos.", "4 anos.", "5 anos."], correct: 1, explanation: "Art. 461 CLT." },
                { subject: "Processo Trabalho", topic: "RO", text: "76. Prazo Recurso Ordin√°rio:", options: ["5 dias.", "8 dias.", "15 dias.", "10 dias."], correct: 1, explanation: "Art. 895 CLT." },
                { subject: "Processo Trabalho", topic: "Sumar√≠ssimo", text: "77. Teto rito sumar√≠ssimo (sal√°rios):", options: ["20.", "40.", "60.", "100."], correct: 1, explanation: "Art. 852-A CLT." },
                { subject: "Direito Trabalho", topic: "Estabilidade", text: "78. Gestante est√°vel at√©:", options: ["Parto.", "5 meses ap√≥s parto.", "1 ano.", "Aposentar."], correct: 1, explanation: "ADCT." },
                { subject: "Processo Trabalho", topic: "Execu√ß√£o", text: "79. Prazo para pagar na execu√ß√£o:", options: ["24h.", "48h.", "15 dias.", "5 dias."], correct: 1, explanation: "Art. 880 CLT." },
                { subject: "Direito Trabalho", topic: "Aviso", text: "80. Aviso pr√©vio proporcional max dias:", options: ["30.", "60.", "90.", "120."], correct: 2, explanation: "Lei 12.506." }
            ]
        };

        let currentExam = [];
        let currentIdx = 0;
        let qTimer, totalTimer;
        let secondsInQuestion = 0;
        let totalSeconds = 5 * 60 * 60;
        let userResponses = Array(80).fill(null); // {selected, correct, subject, review: bool}

        function startQuiz(examKey) {
            currentExam = allExams[examKey];
            document.getElementById('home-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            buildSidebar();
            loadQuestion(0);
            startTotalTimer();
        }

        function buildSidebar() {
            const grid = document.getElementById('questions-grid');
            grid.innerHTML = '';
            for(let i=0; i<80; i++) {
                const btn = document.createElement('button');
                btn.id = `side-q-${i}`;
                btn.className = "w-full py-2 rounded bg-slate-100 border border-slate-200 text-slate-400";
                btn.innerText = i + 1;
                btn.onclick = () => loadQuestion(i);
                grid.appendChild(btn);
            }
        }

        function loadQuestion(idx) {
            currentIdx = idx;
            const q = currentExam[idx];
            
            document.querySelectorAll('[id^="side-q-"]').forEach(el => el.classList.remove('sidebar-active'));
            document.getElementById(`side-q-${idx}`).classList.add('sidebar-active');
            
            document.getElementById('subject-tag').innerText = q.subject;
            document.getElementById('topic-tag').innerText = "TEMA: " + q.topic;
            document.getElementById('question-text').innerText = q.text;
            document.getElementById('current-idx-display').innerText = idx + 1;
            
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            
            q.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "option-btn w-full text-left p-5 border-2 border-slate-200 rounded-2xl hover:bg-blue-50 transition-all flex items-start font-medium";
                btn.innerHTML = `<span class="font-black text-blue-500 mr-4">${String.fromCharCode(65 + i)}</span> ${opt}`;
                
                if(userResponses[idx] && userResponses[idx].selected !== null) {
                    btn.disabled = true;
                    if(i === q.correct) btn.classList.add('correct');
                    if(i === userResponses[idx].selected && i !== q.correct) btn.classList.add('wrong');
                } else {
                    btn.onclick = () => checkAnswer(i, q.correct, q.explanation);
                }
                container.appendChild(btn);
            });

            // Atualiza Bot√£o Chute
            const btnRev = document.getElementById('btn-review');
            if(userResponses[idx] && userResponses[idx].review) {
                btnRev.classList.add('bg-yellow-400', 'text-white');
            } else {
                btnRev.classList.remove('bg-yellow-400', 'text-white', 'bg-yellow-100');
            }

            if(userResponses[idx] && userResponses[idx].selected !== null) {
                document.getElementById('justification-text').innerText = q.explanation;
                document.getElementById('study-tip').innerText = q.subject;
                document.getElementById('feedback').classList.remove('hidden');
            } else {
                document.getElementById('feedback').classList.add('hidden');
            }
            
            resetQuestionTimer();
        }

        function toggleReview() {
            if(!userResponses[currentIdx]) userResponses[currentIdx] = {selected: null, correct: null, subject: currentExam[currentIdx].subject, review: false};
            userResponses[currentIdx].review = !userResponses[currentIdx].review;
            
            const sideBtn = document.getElementById(`side-q-${currentIdx}`);
            if(userResponses[currentIdx].review) {
                sideBtn.classList.add('sidebar-review');
            } else {
                sideBtn.classList.remove('sidebar-review');
                if(userResponses[currentIdx].selected !== null) {
                    sideBtn.classList.add(userResponses[currentIdx].correct ? 'sidebar-correct' : 'sidebar-wrong');
                }
            }
            loadQuestion(currentIdx);
        }

        function checkAnswer(selected, correct, explanation) {
            const isCorrect = (selected === correct);
            if(!userResponses[currentIdx]) userResponses[currentIdx] = {review: false};
            
            userResponses[currentIdx] = { 
                ...userResponses[currentIdx],
                selected: selected, 
                correct: isCorrect, 
                subject: currentExam[currentIdx].subject 
            };
            
            const sideBtn = document.getElementById(`side-q-${currentIdx}`);
            if(!userResponses[currentIdx].review) {
                sideBtn.classList.add(isCorrect ? 'sidebar-correct' : 'sidebar-wrong');
            }
            loadQuestion(currentIdx);
        }

        function showFinalResults() {
            document.getElementById('quiz-screen').classList.remove('flex'); // Ajuste layout
            document.getElementById('quiz-screen').classList.add('block');
            document.getElementById('main-quiz-area').classList.add('hidden');
            document.querySelector('aside').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            
            const totalHits = userResponses.filter(r => r && r.correct).length;
            const totalReview = userResponses.filter(r => r && r.review).length;
            
            document.getElementById('score-total').innerText = totalHits;
            document.getElementById('score-percent').innerText = `${Math.round((totalHits/80)*100)}% de acerto total`;

            const stats = {};
            userResponses.forEach(r => {
                if(!r) return;
                if(!stats[r.subject]) stats[r.subject] = { total: 0, hits: 0 };
                stats[r.subject].total++;
                if(r.correct) stats[r.subject].hits++;
            });

            const reportContainer = document.getElementById('subject-report');
            reportContainer.innerHTML = '';
            for(let sub in stats) {
                const percent = Math.round((stats[sub].hits / stats[sub].total) * 100);
                const color = percent >= 50 ? 'text-green-600' : 'text-red-600';
                reportContainer.innerHTML += `
                    <div class="bg-slate-50 p-4 rounded-2xl border border-slate-100">
                        <p class="text-[10px] font-black text-slate-400 uppercase">${sub}</p>
                        <p class="text-lg font-black ${color}">${percent}% <span class="text-xs text-slate-400">(${stats[sub].hits}/${stats[sub].total})</span></p>
                    </div>`;
            }

            if(totalReview > 0) {
                const subjectsToReview = [...new Set(userResponses.filter(r => r && r.review).map(r => r.subject))];
                document.getElementById('review-summary').classList.remove('hidden');
                document.getElementById('review-list').innerText = "Voc√™ marcou d√∫vida em quest√µes de: " + subjectsToReview.join(", ") + ". Revise essas leis urgentemente!";
            }
        }

        function nextQuestion() { if(currentIdx < 79) loadQuestion(currentIdx + 1); else showFinalResults(); }
        function prevQuestion() { if(currentIdx > 0) loadQuestion(currentIdx - 1); }

        function resetQuestionTimer() {
            clearInterval(qTimer); secondsInQuestion = 0;
            qTimer = setInterval(() => {
                secondsInQuestion++;
                const m = Math.floor(secondsInQuestion / 60).toString().padStart(2, '0');
                const s = (secondsInQuestion % 60).toString().padStart(2, '0');
                document.getElementById('question-timer').innerText = `${m}:${s}`;
            }, 1000);
        }

        function startTotalTimer() {
            totalTimer = setInterval(() => {
                if(totalSeconds > 0) {
                    totalSeconds--;
                    const h = Math.floor(totalSeconds / 3600).toString().padStart(2, '0');
                    const m = Math.floor((totalSeconds % 3600) / 60).toString().padStart(2, '0');
                    const s = (totalSeconds % 60).toString().padStart(2, '0');
                    document.getElementById('total-timer').innerText = `${h}:${m}:${s}`;
                }
            }, 1000);
        }
    </script>
</body>
</html>